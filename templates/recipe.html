<!DOCTYPE html>
<html>
<head>
    <title>{{ recipe.title or "Recipe Details" }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <div class="recipe-header">
            <h1>{{ recipe.title or "Untitled Recipe" }}</h1>
            <p class="source">Source: <a href="{{ recipe.source_url }}" target="_blank">{{ recipe.source_url }}</a></p>
            <p class="date">Added: {{ recipe.date_added }}</p>
            
            <div class="recipe-actions">
                <a href="{{ url_for('edit_recipe', recipe_id=recipe.id) }}" class="btn btn-secondary">Edit Recipe</a>
                <form action="{{ url_for('delete_recipe', recipe_id=recipe.id) }}" method="post" class="inline-form" onsubmit="return confirm('Are you sure you want to delete this recipe?');">
                    <button type="submit" class="btn btn-danger">Delete Recipe</button>
                </form>
                <form action="{{ url_for('generate_grocery_list', recipe_id=recipe.id) }}" method="post" class="inline-form">
                    <button type="submit" class="btn btn-primary">Generate Grocery List</button>
                </form>
            </div>
        </div>
        
        <div class="recipe-content">
            <div class="ingredients-section">
                <h2>Ingredients</h2>
                <ul class="ingredients-list">
                    {% for ingredient in recipe.ingredients %}
                    <li>{{ ingredient }}</li>
                    {% endfor %}
                </ul>
            </div>
            
            <div class="directions-section">
                <h2>Directions</h2>
                <ol class="directions-list">
                    {% for direction in recipe.directions %}
                    <li>{{ direction }}</li>
                    {% endfor %}
                </ol>
            </div>
            
            {% if recipe.grocery_list and recipe.grocery_list|length > 0 %}
            <div class="grocery-list-section">
                <h2>Grocery List</h2>
                {% for category, items in recipe.grocery_list.items() %}
                {% if items and items|length > 0 %}
                <div class="grocery-category">
                    <h3>{{ category }}</h3>
                    <ul>
                        {% for item in items %}
                        <li>{{ item }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
                {% endfor %}
            </div>
            {% endif %}
        </div>
        
        <div class="navigation">
            <a href="{{ url_for('index') }}" class="btn btn-secondary">Home</a>
            <a href="{{ url_for('list_recipes') }}" class="btn btn-secondary">All Recipes</a>
        </div>
    </div>
</body>
</html>